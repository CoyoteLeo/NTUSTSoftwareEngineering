from model.Like import Like
from controller.absract import BaseController


class LikeController(BaseController):
    @staticmethod
    def give_like(board_id, article_id):
        author_id = 1
        like = Like.givelike(author_id=author_id, board_id=board_id, article_id=article_id)
        if type(like) == str:
            param = {"error": like}
            return like
        return "success"

    @staticmethod
    def delete_like(board_id, article_id, like_id):
        author_id = 1
        like = Like.deletelike(author_id=author_id, board_id=board_id, article_id=article_id, id=like_id)
        if type(like) == str:
            param = {"error": like}
            return like
        return "success"

    @classmethod
    def setupUrl(cls):
        from app import app
        app.add_url_rule(rule='/board/<int:board_id>/article/<int:article_id>/like/', view_func=cls.give_like,
                         methods=["POST"])
        app.add_url_rule(rule='/board/<int:board_id>/article/<int:article_id>/like/<int:like_id>',
                         view_func=cls.delete_like, methods=["DELETE"])